#!/usr/bin/env bash

# If running on native Windows, re-exec this hook under Git Bash if available.
# This is idempotent: if already running under Bash it does nothing.
_SCRIPT_DIR_HINT="$(cd "$(dirname "$0")" >/dev/null 2>&1 && pwd || dirname "$0")"
REPO_ROOT="$(cd "$_SCRIPT_DIR_HINT/.." >/dev/null 2>&1 && pwd || echo "$_SCRIPT_DIR_HINT")"
WRAPPER="$REPO_ROOT/.development/win-bash-wrapper.sh"
if [ -z "${BASH_VERSION-}" ]; then
  if [ -x "$WRAPPER" ]; then
    exec "$WRAPPER" "$0" "$@"
  elif command -v bash >/dev/null 2>&1; then
    exec bash "$0" "$@"
  fi
fi

# Description: Minimal git post-commit hook placeholder.
# Behavior:
#  - Ensures the script is running as a Git hook (GIT_DIR set) and that the repo root
#    can be determined; otherwise exits quietly to avoid blocking commits.
#  - Currently a no-op by default but keeps a repository-local hook file available
#    for future post-commit actions such as building distribution artifacts.
# Usage:
#  - Placed in `.githooks/post-commit` and activated via `git config core.hooksPath .githooks`.

set -euo pipefail

if [[ -z "${GIT_DIR-}" ]]; then
  # Not running as a Git hook â€” skip silently.
  exit 0
fi

repo_root="$(git rev-parse --show-toplevel 2>/dev/null || true)"
if [[ -z "$repo_root" ]]; then
  exit 0
fi

cd "$repo_root"

# No post-commit actions configured; exit silently.
exit 0

