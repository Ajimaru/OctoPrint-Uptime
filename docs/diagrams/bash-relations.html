<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Bash scripts relationships — OctoPrint-Uptime</title>
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>body{font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial; padding:24px;}</style>
    </head>
    <body>
        <h1>Bash scripts relationships (overview)</h1>
        <div class="mermaid">
            %%{init: { 'securityLevel': 'loose' }}%%
            flowchart LR
            subgraph DevScripts
            setup[".development/setup_dev.sh"]
            bumpctl[".development/bump_control.sh"]
            wrapper[".development/win-bash-wrapper.sh"]
            install_ps[".development/install-git-for-windows.ps1"]
            post_build[".development/post_commit_build_dist.sh"]
            end
            subgraph Hooks
            prehook[".githooks/pre-commit"]
            posthook[".githooks/post-commit"]
            postd[".githooks/post-commit.d/*.sh"]
            end
            subgraph Venv
            venv_precommit["venv/bin/pre-commit"]
            venv_python["venv/bin/python"]
            bump_bin["venv/bin/bump-my-version"]
            end
            subgraph RepoFiles
            version_py["octoprint_uptime/_version.py"]
            pyproject["pyproject.toml"]
            bump_toml[".development/bumpversion.toml"]
            end
            subgraph NodeJS
            npm_install["npm install → node_modules/.bin/*"]
            jsdoc2md["node_modules/.bin/jsdoc2md"]
            end
            %% key relationships
            setup -->|uses / may exec under| wrapper
            setup -->|may call (PowerShell)| install_ps
            setup -->|creates/activates| venv_python
            setup -->|installs| venv_precommit
            setup -->|enables| prehook
            setup -->|enables| posthook
            setup -->|ensures| npm_install
            npm_install --> jsdoc2md
            prehook -->|execs| venv_precommit
            venv_precommit -->|runs configured hooks (shellcheck, prettier, python checks)| prehook
            bumpctl -->|uses| bump_bin
            bumpctl -->|updates| version_py
            bumpctl -->|updates| pyproject
            bumpctl -->|updates| bump_toml
            bumpctl -->|may call| post_build
            posthook -->|may run| postd
            postd -->|may call| post_build
            %% interactions between hooks and bump control
            bumpctl -->|git commit / tag -> triggers| prehook
            bumpctl -->|git commit / tag -> triggers| posthook
            style setup fill:#fef3c7,stroke:#f59e0b
            style bumpctl fill:#ecfeff,stroke:#06b6d4
            style prehook fill:#eef2ff,stroke:#6366f1
            style posthook fill:#eef2ff,stroke:#6366f1
            style venv_precommit fill:#f3f4f6,stroke:#374151
            style wrapper fill:#f8fafc,stroke:#94a3b8
        </div>
        <p>
            <a href="../getting-started.md">Back to docs</a>
        </p>
    </body>
</html>
